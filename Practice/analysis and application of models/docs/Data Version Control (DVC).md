## Data Version Control (DVC)

Как использовать DVC в простейшем сценарии - версионировании данных наряду с git 

Установка:

- на Linux или maсOS ставим через pip: pip install dvc[s3] (в зависимости от типа хранилища, которое собираетесь использовать, вместо [s3] можно подставить [gdrive], [gs], [azure], [ssh], [hdfs], [webdav], [oss] или [all] - чтобы установить сразу со всеми коннекторами)

- на macOS можно ставить также через Homebrew: **`brew install dvc`** 

- можно также ставить через conda, snap, choco, etc. - подробности см. https://dvc.org/doc/inst

  

  После клонирования или pull’а репозитория, в котором используется DVC, выполняем: 

  dvc pull - это загрузит данные из remote хранилища для текущей ветки 

  Для примера можете склонировать репозиторий https://github.com/iterative/example-get-started и выполнить **`dvc pull`** в корне проекта.

  

  Если вы хотите начать использовать DVC в проекте: 

  **`dvc init`** 							 - создаем служебную папку .dvc в директории проекта 

  **`dvc remote add …`** 		 - конфигурируем remote хранилище для ваших  

  ​											данных (S3/HDFS/Google Drive/etc.), 

  ​											опции здесь https://dvc.org/doc/command-reference/remote/add 

  ​											например, для Yandex Object Storage выполняем 

  ​											dvc remote add -d s3store s3:/// 

  ​											dvc remote modify s3store endpointurl https://storage.yandexcloud.net **`dvc add data_dir`** 			- добавляем папку data_dir (или любую другую) в трекинг через DVC

  ​											(если папка не пустая, то DVC попросит удалить ее из трекинга

  ​											через git - все необходимые команды будут на экране) - будет

  ​											создан файл data_dir.dvc - его надо добавить в git-отслеживание.

  ​											Также эту команду надо повторять перед коммитом ваших изменений **`dvc install`** 					   - установка git hooks на команды checkout, commit и push - то есть 

  ​											после этого шага вы работаете с вашим проектом почти как с обычным 											git-репозиторием, пользуетесь командами **git checkout**, **git commit**

  ​											и **git push** как делали раньше, содержимое папки data_dir будет

  ​											также участвовать в контроле версий (если не забывать делать

  ​											dvc add data_dir после внесения изменений в данные), но 

  ​											храниться будет не в git-репозитории, а в настроенном ранее remote 

  

  ВАЖНОЕ ЗАМЕЧАНИЕ! 

  **`dvc install`** устанавливает хуки на checkout, commit и push - но вам все равно необходимо выполнять **`dvc add data_dir`** каждый раз после того, как вы поменяли содержимое папки data_dir, и перед коммитом - это нужно для пересчета хэша, а команды git add и git commit -a автоматом этот шаг не вызывают даже при наличии хуков.

  

  Если хотим перестать отслеживать директорию data_dir с помощью DVC: 

  **`dvc remove data_dir.dvc`** 

  И не забываем делать **`dvc pull`** (после **`git pull`**), чтобы “подтягивать” изменения из remote.

  С более подробным гайдом ознакомиться можно тут:

  https://dvc.org/doc/start/data-management
  
  
  
  Пример проекта с версионированием данных расположен [здесь](../projects/dvc-sample-nlp-proj).